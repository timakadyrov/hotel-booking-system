# hotel-booking-system
Система управления бронированием номеров в отеле на Python с использованием SQLite и принципов ООП.

## Описание

Учебный проект, демонстрирующий:
- Наследование (абстрактный класс `Person`)
- Полиморфизм и абстракции (сервисы уведомлений)
- Работу с БД SQLite через прямые запросы
- Обработку исключений (`HotelError`)
- Сохранение состояния в JSON (`hotel_state.json`)
- Модульную структуру с разделением ответственности

Это учебный проект системы для управления отелем. Здесь можно добавлять комнаты, регистрировать гостей, бронировать номера на определённые даты, заселять и выселять гостей, а также обрабатывать платежи.
В кoде показано, кaк рaбoтaть с бaзaми данных SQLite, как сохранять данные в JSON-файл для рeзервнoй кoпии, как правильно oбрабатывать oшибки и oтправлять уведомления гостям (пока что простo в консoль, но мoжнo подключить реальную пoчту или SMS)
Проект разделён на логические модули: отдельнo мoдели данных (гости, комнаты, брони), отдельно бизнес лoгика (основной класс отеля), oтдельнo платежи и уведомления. Это помогает лучше понимать структуру прoграммы и удoбно расширять её

## Функциональность

- Управление номерами (добавление, удаление, поиск, список)
- Управление гостями (регистрация, поиск)
- Бронирование номеров:
  - Проверка доступности на выбранные даты
  - Валидация дат (выезд строго после заезда)
  - Автоматическая генерация ID для бронирований
- Процесс заселения/выселения:
  - Изменение статусов бронирования
  - Обновление занятости комнат
  - Автоматический расчёт стоимости проживания
- Платежи:
  - Создание записи о платеже
  - Генерация `transaction_id`
  - Статусы: `pending`, `completed`, `refunded`
- Уведомления:
  - Email-уведомления (заглушка с выводом в консоль)
  - SMS-уведомления (заглушка)
  - Подтверждение брони, отмена, напоминания
- Экспорт/импорт состояния в JSON-файл
- Демонстрационный сценарий с заполнением тестовыми данными

## Структура проекта

```text
project1/
├── db.py                # Работа с SQLite: инициализация и коннектор
├── models.py            # Классы Person, Guest, Room, Booking
├── hotel.py             # Основной класс Hotel (логика отеля)
├── payment.py           # Класс Payment (платежи)
├── notification.py      # Абстрактный NotificationService и реализации
├── main.py              # Демонстрационный сценарий
├── hotel_state.json     # Сохранённое состояние отеля (автогенерация)
├── test_hotel.py        # Юнит-тесты системы
└── README.md            # Описание проекта
```


## Установка и запуск

### Требования

- Python 3.8+
- Стандартная библиотека (sqlite3, json, uuid, datetime)

### Запуск демонстрации

```bash
python3 main.py
```
СКрипт main.py:
- Создаёт БД и таблицы (если нет)
- Добавляет тестовые номера и гостей
- Создаёт несколько бронирований
- Показывает обработку конфликта бронирования
- Имитирует заселение и выселение
- Сохраняет состояние в hotel_state.json

### Примеры использования

```bash
from models import Room, Guest
from hotel import Hotel
from datetime import date

# Создание отеля с email-уведомлениями
hotel = Hotel(name="DemoHotel")

# Добавление номера
room = Room("101", "single", 12000.0)
hotel.add_room(room)

# Регистрация гостя
guest = Guest("g1", "Павел Дуров", "durov.pavel002@example.com", "+77001112233")
hotel.register_guest(guest)

# Бронирование
booking = hotel.create_booking(
    guest_id="g1",
    room_number="101",
    check_in=date(2025, 12, 5),
    check_out=date(2025, 12, 7)
)
```

### Тестирование

Проект включает набор юнит-тестов, проверяющих основные функции системы:
- Добавление и поиск комнат/гостей
- Создание бронирований с валидацией дат
- Проверка доступности номеров
- Заселение и выселение гостей
- Обработка платежей
- Обработка ошибок (дублирование, несуществующие записи)

Для запуска тестов используйте команду:
```bash
python3 -m unittest test_hotel.py -v
```
Либо:
```bash
python3 test_hotel.py
```
## UML диаграмма

<img width="599" height="634" alt="project_uml _diagram" src="https://github.com/user-attachments/assets/c61a5ffb-034a-42de-8be8-5db0af821a8e" />


*Диаграмма показывает связи между классами системы*


## Классы и их роль в коде

| Класс | Описание |
|-------|----------|
| `Person` | Абстрактный класс человека (демонстрация ООП) |
| `Guest` | Модель гостя (наследует `Person`) |
| `Room` | Модель номера (тип, цена, занятость) |
| `Booking` | Модель бронирования (даты, статус, стоимость) |
| `Hotel` | Главный контроллер системы (вся бизнес-логика) |
| `Payment` | Управление платежами |
| `NotificationService` | Абстрактный сервис уведомлений |
| `EmailNotification` | Реализация email-уведомлений (заглушка) |
| `SMSNotification` | Реализация SMS-уведомлений (заглушка) |


### Особенности реализации
- Конфликт дат: система проверяет пересечение периодов при бронировании
- Двойное хранение: данные сохраняются и в SQLite, и в JSON
- Уведомления: поддерживается email и SMS (заглушка с выводом в консоль)
- Статусы брони: booked, checked_in, checked_out, cancelled
- Автогенерация ID: ID для броней и платежей
- Обработка ошибок: кастомные исключения HotelError
- Тестирование: полный набор юнит-тестов для основных функций
- Временные файлы: тесты используют временные БД и JSON-файлы

